{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/richardkravenbiscante/Downloads/Album%20with%20Babi/memories-with-babi/src/lib/appwrite.ts"],"sourcesContent":["import { Client, Databases, Storage } from \"appwrite\";\n\nconst client = new Client();\n\nclient\n  .setEndpoint(process.env.NEXT_PUBLIC_APPWRITE_ENDPOINT!)\n  .setProject(process.env.NEXT_PUBLIC_APPWRITE_PROJECT_ID!);\n\nexport const databases = new Databases(client);\nexport const storage = new Storage(client);\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,SAAS,IAAI,sNAAM;AAEzB,OACG,WAAW,uEACX,UAAU;AAEN,MAAM,YAAY,IAAI,yNAAS,CAAC;AAChC,MAAM,UAAU,IAAI,uNAAO,CAAC"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///Users/richardkravenbiscante/Downloads/Album%20with%20Babi/memories-with-babi/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { databases, storage } from \"@/lib/appwrite\";\nimport { ID } from \"appwrite\";\nimport { Memory } from \"@/types/memory\";\n\n// Define the input type used to create documents (exclude Appwrite metadata)\ntype MemoryInput = Omit<\n  Memory,\n  | \"$id\"\n  | \"$createdAt\"\n  | \"$updatedAt\"\n  | \"$permissions\"\n  | \"$collectionId\"\n  | \"$databaseId\"\n  | \"$sequence\"\n>;\n\nexport default function AdminPage() {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [uploadedImageIds, setUploadedImageIds] = useState<string[]>([]);\n\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const databaseId = process.env.NEXT_PUBLIC_APPWRITE_DATABASE_ID!;\n  const collectionId = process.env.NEXT_PUBLIC_APPWRITE_COLLECTION_ID!;\n  const bucketId = process.env.NEXT_PUBLIC_APPWRITE_BUCKET_ID!;\n\n  async function handleFileUpload(e: React.ChangeEvent<HTMLInputElement>) {\n    setError(null);\n    if (!e.target.files?.length) return;\n\n    setUploading(true);\n    try {\n      const files = Array.from(e.target.files);\n      const uploadedIds: string[] = [];\n\n      for (const file of files) {\n        const response = await storage.createFile(bucketId, ID.unique(), file);\n        uploadedIds.push(response.$id);\n      }\n\n      setUploadedImageIds(prev => [...prev, ...uploadedIds]);\n      setMessage(\"Files uploaded successfully!\");\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to upload one or more files.\");\n    } finally {\n      setUploading(false);\n      e.target.value = \"\"; // Reset file input\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setMessage(null);\n    setError(null);\n\n    if (!title || !date) {\n      setError(\"Title and date are required.\");\n      return;\n    }\n\n    try {\n      const isoDate = new Date(date).toISOString();\n\n      const newMemory: MemoryInput = {\n        title,\n        description,\n        date: isoDate,\n        imageIds: uploadedImageIds,\n      };\n\n      await databases.createDocument(databaseId, collectionId, ID.unique(), newMemory);\n      setMessage(\"Memory added successfully!\");\n\n      // Reset form fields\n      setTitle(\"\");\n      setDescription(\"\");\n      setDate(\"\");\n      setUploadedImageIds([]);\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to add memory.\");\n    }\n  }\n\n  return (\n    <div className=\"max-w-lg mx-auto p-6 bg-white rounded shadow-md mt-8\">\n      <h1 className=\"text-2xl font-bold mb-6 text-center\">Add New Memory</h1>\n\n      <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\n        <label className=\"flex flex-col\">\n          Title <span className=\"text-red-600\">*</span>\n          <input\n            type=\"text\"\n            value={title}\n            onChange={e => setTitle(e.target.value)}\n            required\n            className=\"border border-gray-300 rounded p-2\"\n            placeholder=\"Memory title\"\n          />\n        </label>\n\n        <label className=\"flex flex-col\">\n          Description\n          <textarea\n            value={description}\n            onChange={e => setDescription(e.target.value)}\n            rows={4}\n            className=\"border border-gray-300 rounded p-2\"\n            placeholder=\"Memory description\"\n          />\n        </label>\n\n        <label className=\"flex flex-col\">\n          Date <span className=\"text-red-600\">*</span>\n          <input\n            type=\"datetime-local\"\n            value={date}\n            onChange={e => setDate(e.target.value)}\n            required\n            className=\"border border-gray-300 rounded p-2\"\n          />\n        </label>\n\n        <label className=\"flex flex-col\">\n          Upload Images\n          <input\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            onChange={handleFileUpload}\n            disabled={uploading}\n            className=\"border border-gray-300 rounded p-2\"\n          />\n        </label>\n\n        {uploading && <p className=\"text-blue-600\">Uploading images...</p>}\n\n        {uploadedImageIds.length > 0 && (\n          <div>\n            <h4 className=\"font-semibold\">Uploaded Image IDs:</h4>\n            <ul className=\"list-disc list-inside max-h-32 overflow-auto\">\n              {uploadedImageIds.map(id => (\n                <li key={id} className=\"text-sm break-all\">{id}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {error && <p className=\"text-red-600 font-semibold\">{error}</p>}\n        {message && <p className=\"text-green-600 font-semibold\">{message}</p>}\n\n        <button\n          type=\"submit\"\n          disabled={uploading}\n          className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded disabled:opacity-50\"\n        >\n          Add Memory\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}