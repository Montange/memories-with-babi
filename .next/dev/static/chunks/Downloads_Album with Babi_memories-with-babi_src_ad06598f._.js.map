{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/richardkravenbiscante/Downloads/Album%20with%20Babi/memories-with-babi/src/lib/appwrite.ts"],"sourcesContent":["import { Client, Databases, Storage } from \"appwrite\";\n\nconst client = new Client();\n\nclient\n  .setEndpoint(process.env.NEXT_PUBLIC_APPWRITE_ENDPOINT!)\n  .setProject(process.env.NEXT_PUBLIC_APPWRITE_PROJECT_ID!);\n\nexport const databases = new Databases(client);\nexport const storage = new Storage(client);\n"],"names":[],"mappings":";;;;;;AAKe;AALf;;AAEA,MAAM,SAAS,IAAI,yNAAM;AAEzB,OACG,WAAW,uEACX,UAAU;AAEN,MAAM,YAAY,IAAI,4NAAS,CAAC;AAChC,MAAM,UAAU,IAAI,0NAAO,CAAC"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/richardkravenbiscante/Downloads/Album%20with%20Babi/memories-with-babi/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { databases, storage } from \"@/lib/appwrite\";\nimport { ID } from \"appwrite\";\nimport { Memory } from \"@/types/memory\";\n\n// Define the input type used to create documents (exclude Appwrite metadata)\ntype MemoryInput = Omit<\n  Memory,\n  | \"$id\"\n  | \"$createdAt\"\n  | \"$updatedAt\"\n  | \"$permissions\"\n  | \"$collectionId\"\n  | \"$databaseId\"\n  | \"$sequence\"\n>;\n\nexport default function AdminPage() {\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [uploadedImageIds, setUploadedImageIds] = useState<string[]>([]);\n\n  const [uploading, setUploading] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  const databaseId = process.env.NEXT_PUBLIC_APPWRITE_DATABASE_ID!;\n  const collectionId = process.env.NEXT_PUBLIC_APPWRITE_COLLECTION_ID!;\n  const bucketId = process.env.NEXT_PUBLIC_APPWRITE_BUCKET_ID!;\n\n  async function handleFileUpload(e: React.ChangeEvent<HTMLInputElement>) {\n    setError(null);\n    if (!e.target.files?.length) return;\n\n    setUploading(true);\n    try {\n      const files = Array.from(e.target.files);\n      const uploadedIds: string[] = [];\n\n      for (const file of files) {\n        const response = await storage.createFile(bucketId, ID.unique(), file);\n        uploadedIds.push(response.$id);\n      }\n\n      setUploadedImageIds(prev => [...prev, ...uploadedIds]);\n      setMessage(\"Files uploaded successfully!\");\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to upload one or more files.\");\n    } finally {\n      setUploading(false);\n      e.target.value = \"\"; // Reset file input\n    }\n  }\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setMessage(null);\n    setError(null);\n\n    if (!title || !date) {\n      setError(\"Title and date are required.\");\n      return;\n    }\n\n    try {\n      const isoDate = new Date(date).toISOString();\n\n      const newMemory: MemoryInput = {\n        title,\n        description,\n        date: isoDate,\n        imageIds: uploadedImageIds,\n        isPublished: true, // <-- add this\n      };\n\n      await databases.createDocument(databaseId, collectionId, ID.unique(), newMemory);\n      setMessage(\"Memory added successfully!\");\n\n      // Reset form fields\n      setTitle(\"\");\n      setDescription(\"\");\n      setDate(\"\");\n      setUploadedImageIds([]);\n    } catch (err) {\n      console.error(err);\n      setError(\"Failed to add memory.\");\n    }\n  }\n\n  return (\n    <div className=\"max-w-lg mx-auto p-6 bg-white rounded shadow-md mt-8\">\n      <h1 className=\"text-2xl font-bold mb-6 text-center\">Add New Memory</h1>\n\n      <form onSubmit={handleSubmit} className=\"flex flex-col gap-4\">\n        <label className=\"flex flex-col\">\n          Title <span className=\"text-red-600\">*</span>\n          <input\n            type=\"text\"\n            value={title}\n            onChange={e => setTitle(e.target.value)}\n            required\n            className=\"border border-gray-300 rounded p-2\"\n            placeholder=\"Memory title\"\n          />\n        </label>\n\n        <label className=\"flex flex-col\">\n          Description\n          <textarea\n            value={description}\n            onChange={e => setDescription(e.target.value)}\n            rows={4}\n            className=\"border border-gray-300 rounded p-2\"\n            placeholder=\"Memory description\"\n          />\n        </label>\n\n        <label className=\"flex flex-col\">\n          Date <span className=\"text-red-600\">*</span>\n          <input\n            type=\"datetime-local\"\n            value={date}\n            onChange={e => setDate(e.target.value)}\n            required\n            className=\"border border-gray-300 rounded p-2\"\n          />\n        </label>\n\n        <label className=\"flex flex-col\">\n          Upload Images\n          <input\n            type=\"file\"\n            multiple\n            accept=\"image/*\"\n            onChange={handleFileUpload}\n            disabled={uploading}\n            className=\"border border-gray-300 rounded p-2\"\n          />\n        </label>\n\n        {uploading && <p className=\"text-blue-600\">Uploading images...</p>}\n\n        {uploadedImageIds.length > 0 && (\n          <div>\n            <h4 className=\"font-semibold\">Uploaded Image IDs:</h4>\n            <ul className=\"list-disc list-inside max-h-32 overflow-auto\">\n              {uploadedImageIds.map(id => (\n                <li key={id} className=\"text-sm break-all\">{id}</li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        {error && <p className=\"text-red-600 font-semibold\">{error}</p>}\n        {message && <p className=\"text-green-600 font-semibold\">{message}</p>}\n\n        <button\n          type=\"submit\"\n          disabled={uploading}\n          className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded disabled:opacity-50\"\n        >\n          Add Memory\n        </button>\n      </form>\n    </div>\n  );\n}\n"],"names":["useState","databases","storage","ID","Memory","MemoryInput","Omit","AdminPage","title","setTitle","description","setDescription","date","setDate","uploadedImageIds","setUploadedImageIds","uploading","setUploading","message","setMessage","error","setError","databaseId","process","env","NEXT_PUBLIC_APPWRITE_DATABASE_ID","collectionId","NEXT_PUBLIC_APPWRITE_COLLECTION_ID","bucketId","NEXT_PUBLIC_APPWRITE_BUCKET_ID","handleFileUpload","e","React","ChangeEvent","HTMLInputElement","target","files","length","Array","from","uploadedIds","file","response","createFile","unique","push","$id","prev","err","console","value","handleSubmit","FormEvent","preventDefault","isoDate","Date","toISOString","newMemory","imageIds","isPublished","createDocument","map","id"],"mappings":"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","ignoreList":[]}}]
}